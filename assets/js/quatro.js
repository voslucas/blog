!function(e){var t={};function l(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=1)}([function(e,t){e.exports=React},function(e,t,l){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)Object.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=i(l(0)),a=i(l(2)),r=l(3);document.querySelectorAll(".reactboard").forEach((function(e){let t=e.getAttribute("data-pieces");if(t){let l=t.split(",").map(Number);a.render(n.createElement(r.Board,{pieces:l,highlightLocation:[]}),e)}}));const c=document.querySelector(".reactgame");a.render(n.createElement(r.BoardWithGame,null),c)},function(e,t){e.exports=ReactDOM},function(e,t,l){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(l(0));n.default.createElement;class a{getSafePieces(e,t){let l=e.getAvailablePieces().filter(e=>0!=e).filter(t=>t!=e.nextPiece);var i=[];for(let a=0;a<l.length;a++){const r=l[a];var n=new c(e.pieces,!1);n.executeMove({location:t,nextPiece:r}),-1!=n.hasDirectWinLocation()||i.push(r)}return i}getMove(e){let t=e.hasDirectWinLocation();if(-1!=t)return{location:t,nextPiece:-1};var l=e.getAvailableLocations(),i=e.getAvailablePieces().filter(e=>0!=e).filter(t=>t!=e.nextPiece),n=[];for(let t=0;t<l.length;t++){const i=l[t];this.getSafePieces(e,i).length>0&&n.push(i)}let a=0;a=n.length>0?n[Math.floor(Math.random()*n.length)]:l[Math.floor(Math.random()*l.length)];var r=this.getSafePieces(e,a);return{location:a,nextPiece:r.length>0?r[Math.floor(Math.random()*r.length)]:i[Math.floor(Math.random()*i.length)]}}}class r{constructor(){this.player1=new a,this.player2=new a,this.currentPlayer=1}reset(){this.currentPlayer=1}DoMove(e){let t;1==this.currentPlayer?(t=this.player1.getMove(e),this.currentPlayer=2):(t=this.player2.getMove(e),this.currentPlayer=1),t.location,e.executeMove(t)}}class c{constructor(e,t=!0){this.winCellIndex=-1,this.nextPiece=4,this.ID=0,this.ID=c.IDGen,c.IDGen++,this.pieces=null==e?[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]:e.slice(),t&&this.checkWinner()}reset(){this.winCellIndex=-1,this.nextPiece=4,this.pieces=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}getAvailablePieces(){let e=Array.from(Array(16)).map((e,t)=>t+1);return this.pieces.forEach((t,l)=>{0!=t&&(e[t-1]=0)}),e}getAvailableLocations(){let e=Array(16);return this.pieces.forEach((t,l)=>{0==t&&(e[l]=l+1)}),e.filter(e=>0!=e).map(e=>e-1)}hasDirectWinLocation(){let e=-1,t=this.getAvailableLocations();for(let i=0;i<t.length;i++){var l=t[i];this.simulateMove({location:l,nextPiece:-1}).winCellIndex>=0&&(e=l)}return e}simulateMove(e){var t=new c(this.pieces);return t.pieces[e.location]=this.nextPiece,t.nextPiece=e.nextPiece,t.checkWinner(),t}executeMove(e){this.pieces[e.location]=this.nextPiece,this.nextPiece=e.nextPiece,this.checkWinner()}checkWinner(){c.winCells.forEach((e,t)=>{let l=this.pieces[e[0]],i=this.pieces[e[1]],n=this.pieces[e[2]],a=this.pieces[e[3]];if(0!=l&&0!=i&&0!=n&&0!=a)for(let e=0;e<4;e++)c.PieceBitValue[l-1][e]==c.PieceBitValue[i-1][e]&&c.PieceBitValue[i-1][e]==c.PieceBitValue[n-1][e]&&c.PieceBitValue[n-1][e]==c.PieceBitValue[a-1][e]&&(this.winCellIndex=t)}),-1==this.winCellIndex&&0==this.getAvailableLocations().length&&(this.winCellIndex=-2),-1==this.winCellIndex&&null==this.nextPiece&&(console.log("Illegal move."),this.winCellIndex=-3)}}c.winCells=[[0,1,2,3],[4,5,6,7],[8,9,10,11],[12,13,14,15],[0,4,8,12],[1,5,9,13],[2,6,10,14],[3,7,11,15],[0,5,10,15],[3,6,9,12]],c.PieceBitValue=[[1,1,0,1],[1,1,1,1],[0,1,0,1],[0,1,1,1],[1,1,0,0],[1,1,1,0],[0,1,0,0],[0,1,1,0],[1,0,0,1],[1,0,1,1],[0,0,0,1],[0,0,1,1],[1,0,0,0],[1,0,1,0],[0,0,0,0],[0,0,1,0]],c.IDGen=0;const s=e=>{let t=e.highlight?"highlight":"";return 0==e.index?n.default.createElement("div",{className:t},"Â "):n.default.createElement("img",{src:"/img/"+e.index+".png",className:t})};class u extends n.default.Component{constructor(e){super(e),this.winnerID=0,this.winners=[]}componentDidMount(){this.timerID=setInterval(()=>{this.onTimer()},500)}componentWillUnmount(){clearInterval(this.timerID)}onTimer(){this.winnerID++,this.winnerID>=c.winCells.length&&(this.winnerID=0),this.winners=c.winCells[this.winnerID],this.forceUpdate()}render(){return n.default.createElement(o,{pieces:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],highlightLocation:this.winners})}}t.BoardExplainWinStates=u;class d extends n.default.Component{constructor(e){super(e),this.isBusy=!1,this.state={gameLogic:new r,boardLogic:new c([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),player1wins:0,player2wins:0,draws:0}}reset(){this.state.gameLogic.reset(),this.state.boardLogic.reset()}nextMove(){this.state.gameLogic.DoMove(this.state.boardLogic),this.setState({boardLogic:this.state.boardLogic})}playSingle(){if(this.isBusy)return;for(this.isBusy=!0,-1!=this.state.boardLogic.winCellIndex&&this.reset();-1==this.state.boardLogic.winCellIndex;)this.state.gameLogic.DoMove(this.state.boardLogic);let e=this.state.player1wins,t=this.state.player2wins,l=this.state.draws;-2==this.state.boardLogic.winCellIndex&&l++,this.state.boardLogic.winCellIndex>=0&&(1==this.state.gameLogic.currentPlayer?t++:e++),this.setState({boardLogic:this.state.boardLogic,player1wins:e,player2wins:t,draws:l}),this.isBusy=!1}componentWillUnmount(){clearTimeout(this.timeOutID)}startLoop(){clearTimeout(this.timeOutID),this.timeOutID=setTimeout(()=>{this.playSingle(),this.startLoop()},10)}stopLoop(){clearTimeout(this.timeOutID)}render(){let e=[];return this.state.boardLogic.winCellIndex>=0&&(e=c.winCells[this.state.boardLogic.winCellIndex]),-2==this.state.boardLogic.winCellIndex&&(e=[0,3,12,15]),n.default.createElement("div",null,n.default.createElement("span",null," Current player is : ",this.state.gameLogic.currentPlayer," "),n.default.createElement("span",null," Stats p1-p2-draw : ",this.state.player1wins," - ",this.state.player2wins," - ",this.state.draws," "),n.default.createElement(o,{pieces:this.state.boardLogic.pieces,highlightLocation:e,nextPiece:this.state.boardLogic.nextPiece}),n.default.createElement("button",{onClick:()=>{this.nextMove()}},"Next Move"),n.default.createElement("button",{onClick:()=>{this.playSingle()}},"Single game"),n.default.createElement("button",{onClick:()=>{this.startLoop()}},"Start Loop"),n.default.createElement("button",{onClick:()=>{this.stopLoop()}},"Stop Loop"))}}t.BoardWithGame=d;class o extends n.default.Component{constructor(e){super(e)}getOtherPieces(e){let t=Array.from(Array(16)).map((e,t)=>t+1);return e.forEach((e,l)=>{0!=e&&(t[e-1]=0)}),t}render(){let e=this.props.pieces,t=this.getOtherPieces(e),l=this.props.nextPiece,i=this.props.highlightLocation||[];return n.default.createElement("div",null,n.default.createElement("table",{className:"free"},n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:t[0],highlight:0==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[1],highlight:1==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[2],highlight:2==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[3],highlight:3==l}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:t[4],highlight:4==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[5],highlight:5==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[6],highlight:6==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[7],highlight:7==l}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:t[8],highlight:8==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[9],highlight:9==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[10],highlight:10==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[11],highlight:11==l}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:t[12],highlight:12==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[13],highlight:13==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[14],highlight:14==l})),n.default.createElement("td",null,n.default.createElement(s,{index:t[15],highlight:15==l})))),n.default.createElement("table",{className:"board"},n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:e[0],highlight:i.includes(0)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[1],highlight:i.includes(1)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[2],highlight:i.includes(2)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[3],highlight:i.includes(3)}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:e[4],highlight:i.includes(4)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[5],highlight:i.includes(5)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[6],highlight:i.includes(6)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[7],highlight:i.includes(7)}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:e[8],highlight:i.includes(8)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[9],highlight:i.includes(9)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[10],highlight:i.includes(10)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[11],highlight:i.includes(11)}))),n.default.createElement("tr",null,n.default.createElement("td",null,n.default.createElement(s,{index:e[12],highlight:i.includes(12)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[13],highlight:i.includes(13)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[14],highlight:i.includes(14)})),n.default.createElement("td",null,n.default.createElement(s,{index:e[15],highlight:i.includes(15)})))))}}t.Board=o;class h extends n.default.Component{constructor(e){super(e),this.state={liked:!1}}render(){return this.state.liked?"You liked this.":n.default.createElement("button",{onClick:()=>this.setState({liked:!0})},"Like")}}t.LikeButton=h}]);

